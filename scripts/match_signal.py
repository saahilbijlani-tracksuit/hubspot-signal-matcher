#!/usr/bin/env python3\n"""\nSignal Matching Script\n"""\nimport os\nimport sys\nimport json\nimport argparse\nsys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))\nfrom lib.matcher import SignalMatcher\n\n\ndef main():\n    parser = argparse.ArgumentParser(description="Match a HubSpot Signal")\n    parser.add_argument("signal_id", help="HubSpot Signal ID to match")\n    parser.add_argument("--threshold", type=float, default=None)\n    parser.add_argument("--json", action="store_true")\n    args = parser.parse_args()\n    \n    required_vars = ["HUBSPOT_ACCESS_TOKEN", "SUPABASE_URL", "SUPABASE_KEY", "OPENAI_API_KEY"]\n    missing = [var for var in required_vars if not os.environ.get(var)]\n    if missing:\n        print(f"Missing: {', '.join(missing)}", file=sys.stderr)\n        sys.exit(1)\n    \n    if args.threshold:\n        os.environ["CONFIDENCE_THRESHOLD"] = str(args.threshold)\n    \n    matcher = SignalMatcher()\n    result = matcher.match_signal(args.signal_id)\n    \n    if args.json:\n        print(json.dumps(result, indent=2))\n    else:\n        print(f"\\nSignal ID: {result['signal_id']}")\n        print(f"Total Matches: {result['total_matches']}")\n        print(f"Associations Created: {result['associations_created']}")\n    \n    sys.exit(0 if result['total_matches'] > 0 else 2)\n\n\nif __name__ == "__main__":\n    main()\n