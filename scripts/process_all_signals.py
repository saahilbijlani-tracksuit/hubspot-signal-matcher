#!/usr/bin/env python3\n"""\nProcess All Signals Script - Find and match unassociated signals\n"""\nimport os\nimport sys\nimport json\nfrom datetime import datetime\nsys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))\nfrom lib.hubspot_client import HubSpotClient\nfrom lib.matcher import SignalMatcher\n\n\ndef main():\n    print(f"HubSpot Signal Matcher - Process All Signals")\n    print(f"Started: {datetime.now().isoformat()}")\n    \n    required = ["HUBSPOT_ACCESS_TOKEN", "SUPABASE_URL", "SUPABASE_KEY", "OPENAI_API_KEY"]\n    missing = [v for v in required if not os.environ.get(v)]\n    if missing:\n        print(f"Missing: {', '.join(missing)}")\n        sys.exit(1)\n    \n    hubspot = HubSpotClient()\n    matcher = SignalMatcher()\n    \n    # Get signals that may need matching\n    print("\\nFetching signals...")\n    signals = hubspot.list_signals_without_associations(limit=100)\n    print(f"Found {len(signals)} signals to check")\n    \n    total_processed = 0\n    total_matched = 0\n    total_associations = 0\n    \n    for signal in signals:\n        signal_id = signal["id"]\n        \n        try:\n            result = matcher.match_signal(signal_id)\n            total_processed += 1\n            \n            if result.get("total_matches", 0) > 0:\n                total_matched += 1\n                total_associations += result.get("associations_created", 0)\n            \n            print(f"Signal {signal_id}: {result.get('total_matches', 0)} matches, {result.get('associations_created', 0)} associations")\n            \n        except Exception as e:\n            print(f"Error processing signal {signal_id}: {e}")\n    \n    print(f"\\n{'=' * 50}")\n    print(f"Processing Complete!")\n    print(f"Signals processed: {total_processed}")\n    print(f"Signals matched: {total_matched}")\n    print(f"Associations created: {total_associations}")\n    print(f"Completed: {datetime.now().isoformat()}")\n\n\nif __name__ == "__main__":\n    main()\n